{"version":3,"file":"index.js","sources":["../dist-src/version.js","../dist-src/error.js","../dist-src/graphql.js","../dist-src/with-defaults.js","../dist-src/index.js"],"sourcesContent":["export const VERSION = \"4.3.1\";\n","export class GraphqlError extends Error {\n    constructor(request, response) {\n        const message = response.data.errors[0].message;\n        super(message);\n        Object.assign(this, response.data);\n        this.name = \"GraphqlError\";\n        this.request = request;\n        // Maintains proper stack trace (only available on V8)\n        /* istanbul ignore next */\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        }\n    }\n}\n","import { GraphqlError } from \"./error\";\nconst NON_VARIABLE_OPTIONS = [\n    \"method\",\n    \"baseUrl\",\n    \"url\",\n    \"headers\",\n    \"request\",\n    \"query\"\n];\nexport function graphql(request, query, options) {\n    options =\n        typeof query === \"string\"\n            ? (options = Object.assign({ query }, options))\n            : (options = query);\n    const requestOptions = Object.keys(options).reduce((result, key) => {\n        if (NON_VARIABLE_OPTIONS.includes(key)) {\n            result[key] = options[key];\n            return result;\n        }\n        if (!result.variables) {\n            result.variables = {};\n        }\n        result.variables[key] = options[key];\n        return result;\n    }, {});\n    return request(requestOptions).then(response => {\n        if (response.data.errors) {\n            throw new GraphqlError(requestOptions, {\n                data: response.data\n            });\n        }\n        return response.data.data;\n    });\n}\n","import { request as Request } from \"@octokit/request\";\nimport { graphql } from \"./graphql\";\nexport function withDefaults(request, newDefaults) {\n    const newRequest = request.defaults(newDefaults);\n    const newApi = (query, options) => {\n        return graphql(newRequest, query, options);\n    };\n    return Object.assign(newApi, {\n        defaults: withDefaults.bind(null, newRequest),\n        endpoint: Request.endpoint\n    });\n}\n","import { request } from \"@octokit/request\";\nimport { getUserAgent } from \"universal-user-agent\";\nimport { VERSION } from \"./version\";\nimport { withDefaults } from \"./with-defaults\";\nexport const graphql = withDefaults(request, {\n    headers: {\n        \"user-agent\": `octokit-graphql.js/${VERSION} ${getUserAgent()}`\n    },\n    method: \"POST\",\n    url: \"/graphql\"\n});\nexport function withCustomRequest(customRequest) {\n    return withDefaults(customRequest, {\n        method: \"POST\",\n        url: \"/graphql\"\n    });\n}\n"],"names":["VERSION","GraphqlError","Error","constructor","request","response","message","data","errors","Object","assign","name","captureStackTrace","NON_VARIABLE_OPTIONS","graphql","query","options","requestOptions","keys","reduce","result","key","includes","variables","then","withDefaults","newDefaults","newRequest","defaults","newApi","bind","endpoint","Request","headers","getUserAgent","method","url","withCustomRequest","customRequest"],"mappings":";;;;;;;AAAO,MAAMA,OAAO,GAAG,mBAAhB;;ACAA,MAAMC,YAAN,SAA2BC,KAA3B,CAAiC;EACpCC,WAAW,CAACC,OAAD,EAAUC,QAAV,EAAoB;UACrBC,OAAO,GAAGD,QAAQ,CAACE,IAAT,CAAcC,MAAd,CAAqB,CAArB,EAAwBF,OAAxC;UACMA,OAAN;IACAG,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBL,QAAQ,CAACE,IAA7B;SACKI,IAAL,GAAY,cAAZ;SACKP,OAAL,GAAeA,OAAf,CAL2B;;;;QAQvBF,KAAK,CAACU,iBAAV,EAA6B;MACzBV,KAAK,CAACU,iBAAN,CAAwB,IAAxB,EAA8B,KAAKT,WAAnC;;;;;;ACTZ,MAAMU,oBAAoB,GAAG,CACzB,QADyB,EAEzB,SAFyB,EAGzB,KAHyB,EAIzB,SAJyB,EAKzB,SALyB,EAMzB,OANyB,CAA7B;AAQA,AAAO,SAASC,OAAT,CAAiBV,OAAjB,EAA0BW,KAA1B,EAAiCC,OAAjC,EAA0C;EAC7CA,OAAO,GACH,OAAOD,KAAP,KAAiB,QAAjB,GACOC,OAAO,GAAGP,MAAM,CAACC,MAAP,CAAc;IAAEK;GAAhB,EAAyBC,OAAzB,CADjB,GAEOA,OAAO,GAAGD,KAHrB;QAIME,cAAc,GAAGR,MAAM,CAACS,IAAP,CAAYF,OAAZ,EAAqBG,MAArB,CAA4B,CAACC,MAAD,EAASC,GAAT,KAAiB;QAC5DR,oBAAoB,CAACS,QAArB,CAA8BD,GAA9B,CAAJ,EAAwC;MACpCD,MAAM,CAACC,GAAD,CAAN,GAAcL,OAAO,CAACK,GAAD,CAArB;aACOD,MAAP;;;QAEA,CAACA,MAAM,CAACG,SAAZ,EAAuB;MACnBH,MAAM,CAACG,SAAP,GAAmB,EAAnB;;;IAEJH,MAAM,CAACG,SAAP,CAAiBF,GAAjB,IAAwBL,OAAO,CAACK,GAAD,CAA/B;WACOD,MAAP;GATmB,EAUpB,EAVoB,CAAvB;SAWOhB,OAAO,CAACa,cAAD,CAAP,CAAwBO,IAAxB,CAA6BnB,QAAQ,IAAI;QACxCA,QAAQ,CAACE,IAAT,CAAcC,MAAlB,EAA0B;YAChB,IAAIP,YAAJ,CAAiBgB,cAAjB,EAAiC;QACnCV,IAAI,EAAEF,QAAQ,CAACE;OADb,CAAN;;;WAIGF,QAAQ,CAACE,IAAT,CAAcA,IAArB;GANG,CAAP;;;ACvBG,SAASkB,YAAT,CAAsBrB,SAAtB,EAA+BsB,WAA/B,EAA4C;QACzCC,UAAU,GAAGvB,SAAO,CAACwB,QAAR,CAAiBF,WAAjB,CAAnB;;QACMG,MAAM,GAAG,CAACd,KAAD,EAAQC,OAAR,KAAoB;WACxBF,OAAO,CAACa,UAAD,EAAaZ,KAAb,EAAoBC,OAApB,CAAd;GADJ;;SAGOP,MAAM,CAACC,MAAP,CAAcmB,MAAd,EAAsB;IACzBD,QAAQ,EAAEH,YAAY,CAACK,IAAb,CAAkB,IAAlB,EAAwBH,UAAxB,CADe;IAEzBI,QAAQ,EAAEC,eAAO,CAACD;GAFf,CAAP;;;MCHSjB,SAAO,GAAGW,YAAY,CAACrB,eAAD,EAAU;EACzC6B,OAAO,EAAE;kBACU,sBAAqBjC,OAAQ,IAAGkC,+BAAY,EAAG;GAFzB;EAIzCC,MAAM,EAAE,MAJiC;EAKzCC,GAAG,EAAE;CAL0B,CAA5B;AAOP,AAAO,SAASC,iBAAT,CAA2BC,aAA3B,EAA0C;SACtCb,YAAY,CAACa,aAAD,EAAgB;IAC/BH,MAAM,EAAE,MADuB;IAE/BC,GAAG,EAAE;GAFU,CAAnB;;;;;;"}